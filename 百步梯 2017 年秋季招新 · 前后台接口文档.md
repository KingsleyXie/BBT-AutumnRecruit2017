## 百步梯 2017 年秋季招新 · 前后台接口文档

### 报名
```json
POST ./register.php
{
    "name": "章保滑", //姓名
    "gender": "男", //性别
    "college": "新闻与传播学院", //学院
    "grade": "大一", //年级
    "dorm": "C14 666", //宿舍号
    "tel": "15923336666", //11位手机号
    "department1": "技术部", //第一志愿
    "department2": "还是技术部", //第二志愿（选填）
    "intro": "大家好我是章保滑，我热爱赛跑，希望能和技术部的朋友们一起谈笑风生" //自我介绍（选填）
}

RESPONSE:
//On Success:
{
    "code": 0, //报名成功
    "errMsg": "Success" //默认值
}

//On Failure:
{
    "code": 1,
    "errMsg": "写入数据库失败" //报名失败
}

{
    "code": 233,
    "errMsg": "必填项中含有空值" //数据错误
}

{
    "code": 2333,
    "errMsg": "数据库连接出错，请联系管理员" //配置错误
}
```

### 各部门简介
```json
GET ./intro.php

RESPONSE:
//On Success:
{
    "code": 0, //数据获取成功
    "departments": [ //所有部门信息
        {
            "id": 0, //部门ID
            "name": "技术部", //部门名
            "img": "./pictures/0.png", //部门标题图片地址
            "description": "我们部门只招妹子" //部门简介
        },
        {
            "id": 1,
            "name": "策划推广部",
            "img": "./pictures/1.png",
            "description": "妹子请去技术部"
        }
    ]
}

//On Failure:
{
    "code": 1,
    "errMsg": "获取数据失败，请联系管理员" //数据库为空或获取数据失败
}

{
    "code": 2333,
    "errMsg": "数据库连接出错，请联系管理员" //配置错误
}
```

### 游戏
```json
POST ./game.php
{
    "passedRecord": ...0010110....
    //一串随机01字符串，第247位记录是否成功通过游戏（0为失败 1为成功）
}

RESPONSE:
//On Success:
{
    "code": 0, //请求成功
    "passedNo": 233 //目前成功通过的人数    
}

//On Failure:
{
    "code": 1,
    "errMsg": "更新数据失败" //更新失败
}

{
    "code": 2,
    "errMsg": "获取数据失败" //获取失败
}

{
    "code": 233,
    "errMsg": "必填项中含有空值" //数据错误
}

{
    "code": 2333,
    "errMsg": "数据库连接出错，请联系管理员" //配置错误
}
```
